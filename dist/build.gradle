
plugins {
    id "distribution"
}

evaluationDependsOn(":server")
evaluationDependsOn(":client")

distributions {
    main {
        baseName = "notononoto"
        contents {
            into("lib") {
                from project(":server").jar
                from project(":server").configurations.runtime
            }
            into("webapp") {
                from project(":client").build
            }
        }
    }
}

task run(dependsOn: ":dist:installDist") {
    doLast {
        exec {
            workingDir "$buildDir/install/notononoto/bin"
            commandLine "./run.sh"
            standardInput System.in
        }
    }
}